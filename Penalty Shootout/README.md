***Binary Search Circuit***


To celebrate the 2022 World Cup, I’d like to design a soccer game, penalty shootout, with FPGA and LED matrix. 
The field, goalkeeper, and soccer will be displayed on the LED matrix, and the 7-seg display will show the scores. 
We can move the player’s position and shoot the ball by pressing push buttons. 
Also, the goalkeeper is generated by LFSR, randomly going right or left to catch the shots with its best effort. 
Every player has five shots for each round, and the goal is simply to make as many goals as you can.



Switch9 is reset, and key3 is start. We can also control the player's position by clicking key0 for going right and key2 for left. 
If we’re ready to make a shot, just click key1. The number of shots already made will be shown on Hex5, while the number of goals will be shown on Hex0.


To start the game, we need to reset the system first, and then click key3 to start. 
On the LED matrix, the top row of green lights is the goal, and the 5 green lights in the middle is the goalkeeper. 
The red light at the bottom is the soccer that a player is going to kick.
The goalkeeper, whose movement is controlled by LFSR, randomly moves back and forth in front of the goal. 
After we make a shot, the red light, soccer, will go straight towards the goal until the soccer is blocked or goes through the goalkeeper. 
Then, the soccer goes back to the bottom of LED matrix ready for the next attempt.
If we like to play it again after one round (five shots), we can just click key3 to restart the game.



The way I display the goalkeeper and soccer on LED matrix is to record their coordinates with variables, goalkeeper_x, player_x, and player_y, so I can light up any LEDs on the matrix. 
If I want any figures to move, all I need to do is add or subtract values from those variables. In next clock cycle, the last LEDs are off and the new LEDs will light up.



The goalkeeper is made of a five-width green LED row. The coordinate of the central LED is controlled by LFSR’s output, out[3]. 
The comparator module would check this signal. If out[3] is equal to 1, the goalkeeper goes left, otherwise goes right. 
As long as the red light, soccer, touches the goalkeeper, any of those five green LEDs, it means the shot is blocked.
If the red light touches the goal, it indicates a successful goal.



<p align = "center">
<img src="https://github.com/Howard-121/Digital-System-Design-with-FPGAs/blob/master/Penalty%20Shootout/Images/shootout_state%20diagram.png" width="600" height="600" />
<p align = "center">
Figure 1: State Diagram



<p align = "center">
<img src="https://github.com/Howard-121/Digital-System-Design-with-FPGAs/blob/master/Penalty%20Shootout/Images/shootout_block%20diagram.png" width="700" height="500" />
<p align = "center">
Figure 2: Block Diagram



Results:

![Simulation1](https://github.com/Howard-121/Digital-System-Design-with-FPGAs/blob/master/Penalty%20Shootout/Images/shootout_1.png)
![Simulation2](https://github.com/Howard-121/Digital-System-Design-with-FPGAs/blob/master/Penalty%20Shootout/Images/shootout_2.png)
Figure 3: Simulation Result
